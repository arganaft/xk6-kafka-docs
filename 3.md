У вас возникли две классические проблемы при работе со Spring Data Redis: одна связана с тем, как IDE видит бины, а вторая — с отсутствием библиотеки в рантайме.

### 1. Почему падает при запуске (ClassNotFoundException)

В логе ошибка: `threw exception with message: org/apache/commons/pool2/impl/GenericObjectPoolConfig`.

Несмотря на то, что в вашем `pom.xml` зависимость `commons-pool2` прописана, она **не попала в итоговый запуск (classpath)**. Если посмотреть на ваш длинный список `-classpath` в логе, там нет пути к `commons-pool2`.

**Что нужно сделать:**

1. **Обновите Maven:** В IntelliJ IDEA нажмите на значок «обновить» в панели Maven (в правом верхнем углу) или нажмите `Ctrl+Shift+O`.
2. **Форсируйте загрузку:** Если не помогло, выполните в терминале:
`mvn clean install -U`
3. **Проверьте область видимости:** Убедитесь, что у зависимости в `pom.xml` нет лишнего `<scope>`, который ограничивает её использование. В вашем файле всё верно, проблема чисто в том, что IDE не «прокачала» изменения в проект.

---

### 2. Почему IDE ругается на "More than one bean"

Ошибка `Could not autowire. There is more than one bean of 'RedisConnectionFactory' type` — это чаще всего «фантомная» жалоба IntelliJ IDEA. Spring Boot автоматически создает `LettuceConnectionFactory`, но иногда IDE путается из-за внутренних механизмов автоконфигурации.

**Как правильно настроить `RedisConfig`, чтобы убрать ошибку и запустить проект:**

Добавьте аннотацию `@Primary` на ваш `RedisTemplate`, чтобы Spring знал, какой именно бин использовать в контроллерах, и используйте более «чистую» конфигурацию:

```java
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.Primary;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
import org.springframework.data.redis.serializer.StringRedisSerializer;

@Configuration
public class RedisConfig {

    @Bean
    @Primary // Это пометит ваш шаблон как главный
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory connectionFactory) {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        template.setConnectionFactory(connectionFactory);

        // Сериализация ключей (строки)
        template.setKeySerializer(new StringRedisSerializer());
        template.setHashKeySerializer(new StringRedisSerializer());

        // Сериализация значений (JSON)
        template.setValueSerializer(new GenericJackson2JsonRedisSerializer());
        template.setHashValueSerializer(new GenericJackson2JsonRedisSerializer());

        return template;
    }
}

```

---

### Что проверить в проекте:

* **Структура зависимостей:** В IntelliJ откройте вкладку **Maven -> Dependencies** и убедитесь, что `commons-pool2` там виден. Если его нет — Maven не применил ваш `pom.xml`.
* **Имя бина:** Если IDE всё равно подчеркивает красным `RedisConnectionFactory`, вы можете добавить `@SuppressWarnings("SpringJavaInjectionPointsAutowiringInspection")` над методом. Это "успокоит" IDE, так как в рантайме Spring Boot 3 отлично справляется с выбором единственной фабрики.

### Резюме действий:

1. Нажмите **"Reload All Maven Projects"** в IDE.
2. В классе `RedisConfig` добавьте `@Primary` над методом `redisTemplate`.
3. Попробуйте запустить снова. Ошибка `GenericObjectPoolConfig` должна исчезнуть, так как библиотека `commons-pool2` наконец попадет в билд.

**Хотите, я покажу, как написать контроллер `DealSearchController`, чтобы проверить, что Redis действительно работает и данные туда сохраняются?**
