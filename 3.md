Рад, что всё заработало! В мире Spring Boot «проблема кэша IDE» — это классика, через которую проходит каждый.

Теперь давайте убедимся, что ваше приложение не просто запускается, но и реально пишет/читает данные из вашего **Redis Cluster**.

Вот простой контроллер, который позволит вам проверить связь через обычный браузер или Swagger.

### Класс RedisTestController

Создайте новый класс, например, в пакете `com.search.controller`:

```java
import lombok.RequiredArgsConstructor;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.web.bind.annotation.*;

import java.util.Map;
import java.util.concurrent.TimeUnit;

@RestController
@RequestMapping("/api/v1/redis-test")
@RequiredArgsConstructor // Автоматически внедрит RedisTemplate через конструктор
public class RedisTestController {

    private final RedisTemplate<String, Object> redisTemplate;

    /**
     * Сохранить простую строку в Redis
     * Пример: GET /api/v1/redis-test/set?key=testKey&value=HelloRedis
     */
    @GetMapping("/set")
    public Map<String, String> set(@RequestParam String key, @RequestParam String value) {
        // Сохраняем на 5 минут для теста
        redisTemplate.opsForValue().set(key, value, 5, TimeUnit.MINUTES);
        return Map.of(
            "status", "success",
            "message", "Value saved to Redis Cluster",
            "key", key,
            "value", value
        );
    }

    /**
     * Получить значение по ключу
     * Пример: GET /api/v1/redis-test/get?key=testKey
     */
    @GetMapping("/get")
    public Map<String, Object> get(@RequestParam String key) {
        Object value = redisTemplate.opsForValue().get(key);
        return Map.of(
            "key", key,
            "value", value != null ? value : "Not found"
        );
    }

    /**
     * Проверка здоровья кластера (Cluster Info)
     */
    @GetMapping("/info")
    public String info() {
        try {
            // Пытаемся выполнить простую команду, чтобы проверить живой ли кластер
            return redisTemplate.getConnectionFactory().getConnection().info().toString();
        } catch (Exception e) {
            return "Error connecting to Redis Cluster: " + e.getMessage();
        }
    }
}

```

---

### Как протестировать:

1. **Через браузер:**
* Зайдите на: `http://localhost:8080/api/v1/redis-test/set?key=mydeal&value=12345`
* Вы должны увидеть JSON-ответ об успехе.
* Затем проверьте: `http://localhost:8080/api/v1/redis-test/get?key=mydeal`


2. **Через Swagger (он у вас подключен):**
* Перейдите на `http://localhost:8080/swagger-ui/index.html`
* Там появится ваш новый контроллер `redis-test-controller`.


3. **Через логи:**
Если что-то пойдет не так (например, доступ к серверам `esrt.sber.ru` закрыт фаерволом), вы сразу увидите в консоли ошибку `RedisCommandTimeoutException` или `ClusterHomeException`.

---

### Почему это важно для Кластера?

Ваш `RedisTemplate` благодаря настройкам в `application.yml` теперь умеет делать **Smart Routing**. Когда вы запрашиваете ключ, клиент понимает, на каком из 9 ваших узлов (`tvled-kssh0000X`) лежат данные, и идет напрямую туда.

**Хотите, я помогу написать модель `DealDTO` и покажу, как сохранять в Redis сразу целый объект сделки в формате JSON?**
