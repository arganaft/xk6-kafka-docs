Ошибка стала предельно конкретной: **«cannot set both port name & port number»**.

В манифестах Kubernetes API `networking.k8s.io/v1` при описании бэкенда сервиса в секции `port` можно указывать **либо** имя порта (`name`), **либо** его номер (`number`), но не оба одновременно.

### Исправление ошибки в Ingress

В вашем файле `websocket-istio-test-Ingress.yml` найдите блок `backend` и оставьте только одно поле (лучше `number`, если вы уверены в порту, или `name`, если порт в сервисе именован).

**Как должно быть:**

```yaml
            backend:
              service:
                name: ingress-syngtp
                port:
                  # Оставьте ЧТО-ТО ОДНО:
                  number: 443 
                  # name: https <-- это нужно удалить, если оставили number

```

---

### Важное замечание по вашей конфигурации (Nginx + Istio + SSL)

У вас в аннотациях указано `nginx.ingress.kubernetes.io/ssl-passthrough: 'true'`.
**Это критический момент:**

1. **Проблема Passthrough:** Когда включен `ssl-passthrough`, Nginx не терминирует (не расшифровывает) SSL-трафик, а просто перебрасывает байты на бэкенд (в вашем случае — на Istio Ingress Gateway).
2. **Последствия:** Поскольку Nginx не видит "внутренности" HTTP-пакета, **все остальные ваши аннотации** (CORS, липкие сессии по Cookies, `proxy-set-header Upgrade`, добавление заголовков) **работать не будут**. Они просто игнорируются, так как для их работы Nginx должен расшифровать трафик.

**Рекомендация:**
Если вам действительно нужны настройки WebSocket, Cookie-affinity и CORS на уровне Nginx, вам нужно:

1. Установить `ssl-passthrough: 'false'` (или просто удалить эту строку).
2. Убедиться, что сертификаты для домена настроены корректно в секрете Kubernetes.

Если же политика безопасности требует **mTLS** от самого клиента до Istio (сквозное шифрование), то оставляйте `passthrough`, но тогда знайте, что Nginx-аннотации для WebSocket и Cookies бесполезны — их нужно будет настраивать в Istio через `VirtualService` и `Gateway`.

---

### Итоговый исправленный YAML (с исправлением ошибки порта):

```yaml
kind: Ingress
apiVersion: networking.k8s.io/v1
metadata:
  name: websocket-istio-test
  namespace: ci01142241-k8s-syngtp-south-port-ift
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: 'true'
    nginx.ingress.kubernetes.io/force-ssl-redirect: 'true'
    # ВНИМАНИЕ: Если нужно, чтобы работали Cookies и Headers ниже, 
    # измените ssl-passthrough на 'false'
    nginx.ingress.kubernetes.io/ssl-passthrough: 'true'
    
    nginx.ingress.kubernetes.io/websocket-services: "ingress-syngtp"
    nginx.ingress.kubernetes.io/proxy-http-version: "1.1"
    nginx.ingress.kubernetes.io/proxy-read-timeout: '3600'
    nginx.ingress.kubernetes.io/proxy-send-timeout: '3600'
    
    # Эти настройки работают только при ssl-passthrough: 'false'
    nginx.ingress.kubernetes.io/affinity: 'cookie'
    nginx.ingress.kubernetes.io/session-cookie-name: 'ws-server'
    
    nginx.ingress.kubernetes.io/configuration-snippet: |
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection "upgrade";
  labels:
    app: websocket-istio-test
spec:
  ingressClassName: nginx
  tls:
    - hosts:
        - ci01142241-ift-msgtp.apps.aol9fql3.k8s.delta.sbrf.ru
  rules:
    - host: ci01142241-ift-msgtp.apps.aol9fql3.k8s.delta.sbrf.ru
      http:
        paths:
          - path: /ws
            pathType: Prefix
            backend:
              service:
                name: ingress-syngtp
                port:
                  number: 443 # Оставили только номер порта

```

**Хотите, чтобы я объяснил, как перенести настройки WebSocket и "липких сессий" из Ingress в Istio (VirtualService/Gateway), если вы решите оставить SSL Passthrough?**
